{% extends 'base.html' %}
{% load static %}

{% block title %}Mi Hoja de Vida - VeriHome{% endblock %}

{% block content %}
<div class="pt-24 pb-12 bg-gradient-to-r from-primary to-amber-400">
    <div class="container mx-auto px-4">
        <h1 class="montserrat text-4xl font-bold text-white text-center">Mi Hoja de Vida</h1>
        <p class="text-white text-center mt-4 max-w-2xl mx-auto">Información profesional y personal para la comunidad VeriHome.</p>
    </div>
</div>

<div class="container mx-auto px-4 py-16">
    <div class="bg-white rounded-lg shadow-xl p-8">
        <!-- Información del usuario y calificación -->
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-8 pb-8 border-b border-gray-200">
            <div class="flex items-center mb-4 md:mb-0">
                {% if user.profile_picture %}
                    <img src="{{ user.profile_picture.url }}" alt="{{ user.name }}" class="w-20 h-20 rounded-full object-cover mr-4">
                {% else %}
                    <div class="w-20 h-20 rounded-full bg-amber-500 flex items-center justify-center text-white text-3xl font-bold mr-4">
                        {{ user.name|first|upper }}
                    </div>
                {% endif %}
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">{{ user.name }}</h2>
                    <p class="text-gray-600">{{ user.get_profile_type_display }}</p>
                </div>
            </div>
            
            <!-- Calificación con estrellas -->
            <div class="flex flex-col items-start md:items-end">
                <div class="flex items-center mb-1">
                    <div class="flex">
                        {% for i in "12345" %}
                            {% if forloop.counter <= user.rating %}
                                <i class="ri-star-fill text-amber-500 text-xl"></i>
                            {% else %}
                                <i class="ri-star-line text-gray-400 text-xl"></i>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <span class="ml-2 text-gray-700">{{ user.rating }} de 5</span>
                </div>
                <p class="text-gray-500 text-sm">Calificación asignada por VeriHome</p>
            </div>
        </div>
        
        <!-- Contenido de la hoja de vida -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Columna izquierda: Información personal -->
            <div>
                <h3 class="text-xl font-bold text-gray-900 mb-4">Información Personal</h3>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="mb-4">
                        <p class="text-gray-500 text-sm">Correo electrónico</p>
                        <p class="text-gray-900">{{ user.email }}</p>
                    </div>
                    <div class="mb-4">
                        <p class="text-gray-500 text-sm">Teléfono</p>
                        <p class="text-gray-900">{{ user.phone_number|default:"No especificado" }}</p>
                    </div>
                    <div>
                        <p class="text-gray-500 text-sm">Miembro desde</p>
                        <p class="text-gray-900">{{ user.date_joined|date:"d/m/Y" }}</p>
                    </div>
                </div>
                
                <!-- Botón para editar -->
                <a href="#" class="block mt-4 bg-amber-500 text-white text-center py-2 px-4 rounded hover:bg-amber-600 transition-colors">
                    <i class="ri-edit-line mr-2"></i> Editar Información
                </a>
            </div>
            
            <!-- Columna central: Experiencia y habilidades -->
            <div class="md:col-span-2">
                <h3 class="text-xl font-bold text-gray-900 mb-4">Acerca de mí</h3>
                <div class="bg-gray-50 p-4 rounded-lg mb-6">
                    <p class="text-gray-700">{{ user.resume|default:"No has proporcionado información sobre ti. Completa tu hoja de vida para que otros usuarios puedan conocerte mejor."|linebreaks }}</p>
                </div>
                
                <!-- Sección específica según el tipo de perfil -->
                {% if user.profile_type == 'arrendador' %}
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Experiencia como Arrendador</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="text-gray-700">Comparte tu experiencia como arrendador, cuánto tiempo llevas en el negocio inmobiliario, y qué tipo de propiedades sueles ofrecer.</p>
                    </div>
                {% elif user.profile_type == 'arrendatario' %}
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Preferencias de Vivienda</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="text-gray-700">Comparte tus preferencias de vivienda, como ubicación, tipo de propiedad, presupuesto, etc.</p>
                    </div>
                {% elif user.profile_type == 'prestador' %}
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Servicios Ofrecidos</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="text-gray-700">Describe los servicios que ofreces, tu experiencia en el área, y cualquier certificación o especialización que tengas.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
